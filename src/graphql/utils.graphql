query GetTokenisedCode($code: String!, $language: String!, $theme: String) {
  TokenisedCode(code: $code, language: $language, theme: $theme) {
    success
    data
  }
}

query GetLatestFlick($sub: String!) {
  Flick(
    where: {
      startAt: { _gte: "now()" }
      participants: { userSub: { _eq: $sub } }
    }
    order_by: { startAt: asc }
    limit: 1
  ) {
    ...Flick
  }
}
query GetFlickByJoinLink($joinLink: String!) {
  Flick(where: { joinLink: { _eq: $joinLink } }) {
    ...PublicFlick
    participants {
      user {
        displayName
        picture
      }
    }
  }
}

mutation UploadFile($key: String!) {
  UploadFile(key: $key) {
    success
    url
  }
}

mutation ProduceVideo($flickId: uuid!) {
  ProduceVideo(flickId: $flickId) {
    id
  }
}

mutation GetRTCToken($fragmentId: uuid!) {
  RTCToken(fragmentId: $fragmentId) {
    token
    success
  }
}

mutation SubToVideoEmails(
  $email: String!
  $id: String!
  $targetType: TargetType!
) {
  Subscribe(email: $email, id: $id, targetType: $targetType) {
    success
  }
}

mutation GetSuggestedText($text: String!) {
  SuggestPhrase(text: $text) {
    suggestion
  }
}
