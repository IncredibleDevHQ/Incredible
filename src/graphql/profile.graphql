query GetUserSeries($userId: String!, $limit: Int) {
  Series(where: { ownerSub: { _eq: $userId } }, limit: $limit) {
    id
    name
    description
    picture
    Flick_Series_aggregate {
      aggregate {
        count
      }
    }
  }
}

query GetMyFlicks($limit: Int) {
  Flick(limit: $limit) {
    id
    name
    description
  }
}

query SeriesFlicks($id: uuid) {
  Flick_Series(where: { seriesId: { _eq: $id } }) {
    flickId
    order
    flick {
      id
      producedLink
      name
      previewLink
      description
    }
  }
}

mutation CreateUserSeries(
  $name: String!
  $organisationSlug: String
  $picture: String
) {
  CreateSeries(
    name: $name
    organisationSlug: $organisationSlug
    picture: $picture
  ) {
    id
  }
}

mutation UpdateSeriesFlick($flickIds: [uuid!]!, $seriesId: uuid!) {
  UpdateSeriesFlicks(flickIds: $flickIds, seriesId: $seriesId) {
    success
  }
}

mutation UpdateProfile($displayName: String!, $userId: String!) {
  update_User(
    _set: { displayName: $displayName }
    where: { sub: { _eq: $userId } }
  ) {
    affected_rows
  }
}

query SeriesFlickCount($seriesId: uuid) {
  Flick_Series_aggregate(where: { seriesId: { _eq: $seriesId } }) {
    aggregate {
      count(columns: flickId)
    }
  }
}
