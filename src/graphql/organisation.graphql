mutation CreateOrganisation($slug: String!) {
  CreateOrganisation(slug: $slug) {
    createdAt
    slug
  }
}

mutation AddMemberToOrganisation(
  $email: String = ""
  $organisationSlug: String = ""
  $role: MEMBER_ROLE_ENUM_ACTION_enum = Member
) {
  AddMemberToOrganisation(
    email: $email
    organisationSlug: $organisationSlug
    role: $role
  ) {
    id
  }
}

fragment Member on Member {
  id
  role
  user {
    displayName
    email
    picture
    sub
    updatedAt
    onboarded
    username
  }
}

fragment Organisation on Organisation {
  slug
  members {
    ...Member
  }
}

query GetUserOrganisations($sub: String = "") {
  Organisation(where: { members: { user: { sub: { _eq: $sub } } } }) {
    ...Organisation
  }
}

fragment Series on Series {
  id
  name
  organisationSlug
  picture
  description
  ownerSub
}

query GetSeries($organisationSlug: String = "") {
  Series(where: { organisationSlug: { _eq: $organisationSlug } }) {
    ...Series
  }
}

mutation CreateSeries(
  $description: String = ""
  $name: String = ""
  $organisationSlug: String = ""
  $ownerSub: String = ""
  $picture: String = ""
) {
  insert_Series_one(
    object: {
      name: $name
      description: $description
      organisationSlug: $organisationSlug
      picture: $picture
      ownerSub: $ownerSub
    }
  ) {
    ...Series
  }
}
